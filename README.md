# E-commerce App Backend

A RESTful API backend for an e-commerce application built with Fastify and TypeScript. This backend provides endpoints for user authentication, product management, category handling, order tracking, tax calculations, and image serving.

## Table of Contents

- [âœ¨ Features](#-features)
- [ğŸ“‹ Prerequisites](#-prerequisites)
- [ğŸ”§ Installation](#-installation)
- [ğŸ› ï¸ Development Setup](#-development-setup)
- [ğŸš€ Usage](#-usage)
- [ğŸ“¡ API Endpoints](#-api-endpoints)
  - [ğŸ” Authentication](#-authentication)
  - [ğŸ“‚ Categories](#-categories)
  - [ğŸ›ï¸ Products](#ï¸-products)
  - [ğŸ“¦ Orders](#-orders)
  - [ğŸ’° Taxes](#-taxes)
  - [ğŸ–¼ï¸ Images](#ï¸-images)
- [ğŸ“ Project Structure](#-project-structure)
- [ğŸ“œ Scripts](#-scripts)
- [âš™ï¸ Tech Stack](#ï¸-tech-stack)
- [ğŸ’¾ Data Structure](#-data-structure)
- [ğŸ“„ License](#-license)

## âœ¨ Features

- **User Authentication**: Login and signup endpoints for user management
- **Product Management**: Retrieve products with details including sizes, prices, images, and categories
- **Category Management**: Browse and filter products by categories
- **Order Tracking**: Check order status with real-time updates
- **Tax Calculation**: Dynamic VAT and shipping fee calculation
- **Image Serving**: Serve product images stored as base64 encoded data

## ğŸ“‹ Prerequisites

- Node.js (v14 or higher)
- pnpm 10.17.0

## ğŸ”§ Installation

This project uses GitHub Actions to automatically create releases when code is pushed to the `main` branch. Each release includes a pre-built `index.js` file that you can download and run directly.

### Downloading and Running

1. Go to the [Releases page](https://github.com/diozenio/ecommerce-app-backend/releases) on GitHub
2. Download the latest release's `index.js` file
3. Run the server using Node.js:

```bash
node index.js
```

The server will start on `http://localhost:3000`.

**Note:** The releases are automatically generated by the GitHub Actions workflow, which builds the project and packages it as `index.js` for easy distribution.

## ğŸ› ï¸ Development Setup

If you want to build and run the project from source:

1. Clone the repository:

```bash
git clone https://github.com/diozenio/ecommerce-app-backend
cd ecommerce-app-backend
```

2. Install dependencies:

```bash
pnpm install
```

## ğŸš€ Usage

### Development Mode

Run the server in development mode with hot reload:

```bash
pnpm dev
```

The server will start on `http://localhost:3000` with automatic reload on file changes.

### Production Build

Build the production bundle:

```bash
pnpm build
```

Or build for development:

```bash
pnpm build:dev
```

### Start Production Server

After building, start the production server:

```bash
pnpm start
```

The server will be available at `http://localhost:3000`.

## ğŸ“¡ API Endpoints

### ğŸ” Authentication

#### POST /login

Authenticate a user with email and password.

**Request Body:**

```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**Success Response (200):**

```json
{
  "message": "Login successful",
  "user": {
    "id": "uuid",
    "fullName": "John Doe",
    "email": "user@example.com",
    "password": "password123"
  }
}
```

**Error Responses:**

- `400`: Email and password are required
- `401`: Invalid credentials

#### POST /signup

Register a new user account.

**Request Body:**

```json
{
  "fullName": "John Doe",
  "email": "user@example.com",
  "password": "password123"
}
```

**Success Response (201):**

```json
{
  "message": "User created successfully",
  "user": {
    "id": "uuid",
    "fullName": "John Doe",
    "email": "user@example.com",
    "password": "password123"
  }
}
```

**Error Responses:**

- `400`: Full name, email and password are required, or user already exists

### ğŸ“‚ Categories

#### GET /categories

Retrieve all available categories.

**Success Response (200):**

```json
[
  {
    "id": "category-id",
    "title": "Category Name"
  }
]
```

#### GET /categories/:id

Retrieve a specific category by ID.

**Success Response (200):**

```json
{
  "id": "category-id",
  "title": "Category Name"
}
```

**Error Response:**

- `404`: Category not found

### ğŸ›ï¸ Products

#### GET /products

Retrieve all available products.

**Success Response (200):**

```json
[
  {
    "id": "product-id",
    "title": "Product Name",
    "sizes": ["SMALL", "MEDIUM", "LARGE"],
    "price": 29.99,
    "imageUrl": "image-url",
    "category": {
      "id": "category-id",
      "title": "Category Name"
    },
    "discount": 0.1
  }
]
```

#### GET /products/:id

Retrieve a specific product by ID.

**Success Response (200):**

```json
{
  "id": "product-id",
  "title": "Product Name",
  "sizes": ["SMALL", "MEDIUM", "LARGE"],
  "price": 29.99,
  "imageUrl": "image-url",
  "category": {
    "id": "category-id",
    "title": "Category Name"
  },
  "discount": 0.1
}
```

**Error Response:**

- `404`: Product not found

### ğŸ“¦ Orders

#### GET /orders/:id

Retrieve order status by order ID.

**Success Response (200):**

```json
{
  "status": "in_transit"
}
```

**Possible Status Values:**

- `in_transit`: Order is being shipped
- `picked`: Order has been picked from warehouse
- `packing`: Order is being packed

### ğŸ’° Taxes

#### GET /taxes

Retrieve tax information including VAT and shipping fees.

**Success Response (200):**

```json
{
  "vat": 0.08,
  "shippingFee": 0.05
}
```

**Note:** Values are randomly generated for demonstration purposes.

### ğŸ–¼ï¸ Images

#### GET /images/:id

Serve a product image by image ID.

**Success Response (200):**

- Content-Type: `image/png`
- Body: PNG image buffer

**Error Response:**

- `404`: Image not found

## ğŸ“ Project Structure

```
ecommerce-app-backend/
â”œâ”€â”€ dist/                 # Compiled output (bundle.js)
â”œâ”€â”€ images/              # Product image files
â”œâ”€â”€ node_modules/        # Dependencies
â”œâ”€â”€ data.json            # Seed data (users, products, categories, images)
â”œâ”€â”€ server.ts            # Main server file with all API routes
â”œâ”€â”€ tsconfig.json        # TypeScript configuration
â”œâ”€â”€ webpack.config.cjs   # Webpack build configuration
â”œâ”€â”€ package.json         # Project metadata and dependencies
â””â”€â”€ pnpm-lock.yaml       # Lock file for pnpm
```

## ğŸ“œ Scripts

- `pnpm dev`: Start development server with hot reload using `tsx watch`
- `pnpm build`: Build production bundle using Webpack
- `pnpm build:dev`: Build development bundle using Webpack
- `pnpm start`: Start production server from compiled bundle

## âš™ï¸ Tech Stack

- **Runtime**: Node.js
- **Framework**: Fastify 5.6.1
- **Language**: TypeScript 5.9.3
- **Build Tool**: Webpack 5.102.1
- **Package Manager**: pnpm 10.17.0
- **Dependencies**:
  - `uuid`: For generating unique identifiers
  - `@faker-js/faker`: For generating mock data (orders and taxes)

## ğŸ’¾ Data Structure

The application uses `data.json` as the data source, containing:

- **users**: Array of user objects with authentication credentials
- **categories**: Array of product categories
- **products**: Array of products with details, prices, and category associations
- **images**: Array of base64-encoded image data

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
